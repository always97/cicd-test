# 워크플로우 -> 자동화 할 작업의 설계서 -> action.yml
#

name: Test PR Activity Types

on:
  pull_request:
    types: [opened, synchronize, closed]
    branches: [main]

jobs:
  handle-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Show PR event type
        run: echo Event action: ${{ github.event.action }}

      - name: Do action based on type
        run: |
          if [[ "${{ github.event.action }}" == "opened" ]]; then
            echo "✅ PR opened: run tests"
            npm install
            npm test
          elif [[ "${{ github.event.action }}" == "synchronize" ]]; then
            echo "🔄 New commits pushed to PR: run tests again"
            npm install
            npm test
          elif [[ "${{ github.event.action }}" == "closed" ]]; then
            echo "🧹 PR closed: do cleanup"
            # 예: rm -rf tmp/
          else
            echo "❓ Unexpected action: ${{ github.event.action }}"
          fi